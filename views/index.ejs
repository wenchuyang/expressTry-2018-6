<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>
    <ul class="infomation">
      <% users.forEach(function(user){ %>
        <li>
          <span><%= user.wid %></span> 
          <span><%= user.name %></span>
          <span><%= user.password %></span>
          <button class="delete"> 删除 </button>
          <button class="update">编辑</button>
          <button class="submit">提交</button>
        </li>
      <% })%>
    </ul>
    <form action="/xxx" method="post">
      <input type="text" name="wid" placeholder="ID">
      <input type="text" name="name" placeholder="用户名">
      <input type="text" name="password" placeholder="密码">
      <button type="submit">提交</button>
    </form>
    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous"></script>
    <script>
      
      $('.infomation>li>button.delete').on('click', (e) => {
        $.ajax({
          url: '/delete',
          method: 'POST',
          data: {wid: $(e.currentTarget).siblings().first()[0].innerText}
        }).then(
          () => { console.log('success') },
          () => { console.log('error') }
        )
      })
      
    </script>
  </body>
</html>